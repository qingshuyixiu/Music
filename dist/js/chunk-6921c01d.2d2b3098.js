(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6921c01d"],{"27e2":function(t,e,s){"use strict";s("9bd2")},"3d6b":function(t,e,s){},"62a9":function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"comments"},[s("div",{staticClass:"userpic"},[s("img",{attrs:{src:t.Comments.user.avatarUrl,alt:""}})]),s("div",{staticClass:"userCom"},[s("p",[s("span",{staticClass:"user"},[t._v(t._s(t.Comments.user.nickname)+":")]),t._v(" "+t._s(t.Comments.content))])]),s("div",{staticClass:"like"},[s("i",{staticClass:"likebg"}),s("p",[t._v(t._s(t.Comments.likedCount))])])])},i=[],n={props:["Comments"]},a=n,c=(s("c965"),s("2877")),r=Object(c["a"])(a,o,i,!1,null,"4c518ade",null);e["a"]=r.exports},"6d5f":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mvplay"},[s("return"),s("video",{attrs:{src:t.url,controls:"",autoplay:""}}),s("div",{staticClass:"describe"},[s("div",{staticClass:"author"},[s("h3",[t._v(t._s(t.mvdata.name))]),s("h5",[t._v("作者:"),t._l(t.artists,(function(e){return s("span",{key:e.id},[t._v(t._s(e.name)+"/")])}))],2),s("div",{staticClass:"mvauthor"},[s("p",{on:{click:function(e){e.stopPropagation(),t.show=!t.show}}},[t._v("详情")]),s("p",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[t._v(t._s(t.mvdata.desc))])])])]),s("div",{staticClass:"similarity"},[s("h3",[t._v("相似MV")]),s("div",{staticClass:"similaritymv"},t._l(t.similaritymv,(function(e){return s("router-link",{key:e.id,staticClass:"mv",attrs:{tag:"div",to:"/MvPlay/"+e.id}},[s("img",{attrs:{src:e.cover},on:{click:t.refresh}})])})),1)]),s("div",{staticClass:"comment"},[s("h4",[t._v("评论("+t._s(t.mvdata.commentCount)+")")]),t._l(t.Comments,(function(t){return s("comments",{key:t.id,attrs:{Comments:t}})})),s("go-top",{attrs:{topshow:t.topshow}}),s("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),s("ul",[t.flag?s("li",{staticClass:"no"},[t._v("木有更多了/(ㄒoㄒ)/~~")]):t._e()])],2)],1)},i=[],n=s("7a09"),a=s("62a9"),c=s("3a5e"),r=s("c12c"),l={props:["id"],data:function(){return{url:"",artists:[],mvdata:{},Comments:[],show:!1,perpage:30,page:0,isLoading:!0,flag:!1,topshow:!1,timer:null,similaritymv:[]}},components:{Return:n["a"],Comments:a["a"],Loading:c["a"],GoTop:r["a"]},created:function(){var t=this;this.$emit("stop",!1),this.$axios.get("/mv/detail?mvid="+this.id).then((function(e){t.artists=e.data.data.artists,t.mvdata=e.data.data,0==t.mvdata.commentCount&&(t.isLoading=!1,t.flag=!0)})),this.$axios.get("/mv/url?id="+this.id).then((function(e){t.url=e.data.data.url})),this.$axios.get("/comment/mv?id="+this.id).then((function(e){t.Comments=e.data.comments})),this.$axios.get("/simi/mv?mvid="+this.id).then((function(e){t.similaritymv=e.data.mvs}))},methods:{refresh:function(){window.location.reload()},onScroll:function(){var t=this,e=document.documentElement.scrollHeight||document.body.scrollHeight,s=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.clientHeight||document.body.clientHeight;this.topshow=s>=400,e-s-o<20&&(this.loadMore(),window.removeEventListener("scroll",this.onScroll),this.timer=setTimeout((function(){window.addEventListener("scroll",t.onScroll)}),1e3))},loadMore:function(){this.isLoading=!0,this.page++,this.getresult()},getresult:function(){var t=this;this.$axios.get("/comment/mv",{params:{id:this.id,limit:this.perpage,offset:this.page*this.perpage}}).then((function(e){if(e.data.comments.length>0)for(var s=0;s<e.data.comments.length;s++)t.Comments.push(e.data.comments[s]);else clearTimeout(t.timer),window.removeEventListener("scroll",t.onScroll),t.flag=!0;t.isLoading=!1}))}},watch:{id:function(){this.refresh()}},beforeDestroy:function(){clearTimeout(this.timer),window.removeEventListener("scroll",this.onScroll)},beforeRouteEnter:function(t,e,s){s((function(t){window.addEventListener("scroll",t.onScroll)}))},beforeRouteLeave:function(t,e,s){this.$emit("stop",!0),s()}},m=l,u=(s("27e2"),s("2877")),d=Object(u["a"])(m,o,i,!1,null,"17855ca8",null);e["default"]=d.exports},"7a09":function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"return"},[s("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.goback(e)}}},[t._v(" <")])])},i=[],n={methods:{goback:function(){this.$router.go(-1)}}},a=n,c=(s("dc19"),s("2877")),r=Object(c["a"])(a,o,i,!1,null,"50c54c4e",null);e["a"]=r.exports},"9bd2":function(t,e,s){},a3ca:function(t,e,s){"use strict";s("3d6b")},b530:function(t,e,s){},c12c:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"returntopbox"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.topshow,expression:"topshow"}],staticClass:"returntop",on:{click:t.goTop}},[t._v("^")])])},i=[],n={props:["topshow"],data:function(){return{topTimer:null}},methods:{goTop:function(){var t=this;this.topTimer=setInterval((function(){var e=document.documentElement.scrollTop||document.body.scrollTop,s=e/4;0!=document.documentElement.scrollTop?document.documentElement.scrollTop-=s:document.body.scrollTop-=s,0==e&&clearInterval(t.topTimer)}),30)}}},a=n,c=(s("a3ca"),s("2877")),r=Object(c["a"])(a,o,i,!1,null,"343572f4",null);e["a"]=r.exports},c965:function(t,e,s){"use strict";s("b530")},dc19:function(t,e,s){"use strict";s("e277")},e277:function(t,e,s){}}]);
//# sourceMappingURL=chunk-6921c01d.2d2b3098.js.map