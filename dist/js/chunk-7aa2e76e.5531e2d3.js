(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7aa2e76e"],{"2d3b":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("return"),n("search-box",{attrs:{keyword:t.keywords,flag:t.flag},on:{inputing:t.inputing,searchresult:t.searchresult}}),n(t.showcomponent,{tag:"component",attrs:{keywords:t.keywords},on:{player:function(e){return t.$emit("player",e)},clksearch:t.searchresult}})],1)},s=[],r=n("1f29"),i=n("7a09"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hotsearch"},[n("p",[t._v("热门搜索")]),n("ul",t._l(t.hotsearch,(function(e,o){return n("li",{key:o,on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.$emit("clksearch",{keywords:e.first})}}},[t._v(t._s(e.first))])})),0)])},c=[],u={data:function(){return{hotsearch:[]}},created:function(){var t=this;this.$axios("/search/hot").then((function(e){t.hotsearch=e.data.result.hots}))}},l=u,d=(n("2e88"),n("2877")),h=Object(d["a"])(l,a,c,!1,null,"990fa2d6",null),f=h.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"searchSuggest"},[n("p",[t._v("搜索提示")]),n("ul",[t._l(t.suggestList,(function(e){return n("li",{key:e.id,on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.$emit("clksearch",{keywords:e.name})}}},[n("i"),t._v(t._s(e.name)+" ")])})),n("li",{directives:[{name:"show",rawName:"v-show",value:!t.suggestList,expression:"!suggestList"}],staticClass:"no"},[t._v("木有更多结果了/(ㄒoㄒ)/~~")])],2)])},m=[],g={props:["keywords"],data:function(){return{suggestList:[]}},created:function(){this.suggest(this.keywords)},watch:{keywords:function(t){this.suggest(t)}},methods:{suggest:function(t){var e=this;this.$axios.get("/search/suggest?keywords="+t).then((function(t){e.suggestList=t.data.result.songs}))}}},w=g,v=(n("90e5"),Object(d["a"])(w,p,m,!1,null,"5189f736",null)),y=v.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"result"},[n("p",[t._v("搜索结果")]),n("ul",[t._l(t.searchresult,(function(e,o){return n("li-item",{key:o,attrs:{keywords:t.keywords,item:e},on:{player:function(e){return t.$emit("player",e)}}})})),n("go-top",{attrs:{topshow:t.topshow}}),t.isLoading?n("loading"):t._e(),t.flag?n("li",{staticClass:"no"},[t._v("木有更多搜索结果了/(ㄒoㄒ)/~~,换个词试试吧~~")]):t._e()],2)])},k=[],_=(n("d81d"),n("b0c0"),n("99af"),n("8f4a")),E=n("3a5e"),L=n("c12c"),x={props:["keywords"],data:function(){return{searchresult:[],page:0,perpage:30,isLoading:!0,flag:!1,timer:null,topshow:!1}},components:{LiItem:_["a"],Loading:E["a"],GoTop:L["a"]},created:function(){var t=this;this.$axios.get("/search?keywords="+this.keywords).then((function(e){t.searchresult=e.data.result.songs.map((function(e){return e.song={artists:[{name:e.artists[0].name}],album:e.album},t.isLoading=!1,e}))})),window.addEventListener("scroll",this.onScroll)},beforeDestroy:function(){clearTimeout(this.timer),window.removeEventListener("scroll",this.onScroll)},methods:{onScroll:function(){var t=this,e=document.documentElement.scrollHeight||document.body.scrollHeight,n=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.clientHeight||document.body.clientHeight;this.topshow=n>=400,e-n-o<20&&(this.loadMore(),window.removeEventListener("scroll",this.onScroll),this.timer=setTimeout((function(){window.addEventListener("scroll",t.onScroll)}),1e3))},loadMore:function(){this.isLoading=!0,this.page++,this.getresult()},getresult:function(){var t=this;this.axios.get("/search",{params:{keywords:this.keywords,limit:this.perpage,offset:this.page*this.perpage}}).then((function(e){if(!e.data.result.songs)return t.isLoading=!1,clearTimeout(t.timer),window.removeEventListener("scroll",t.onScroll),void(t.flag=!0);var n=e.data.result.songs.map((function(t){return t.song={artists:t.artists,album:t.album},t}));t.isLoading=!1,t.searchresult=t.searchresult.concat(n)}))}},beforeRouteEnter:function(t,e,n){n((function(t){window.addEventListener("scroll",t.onScroll)}))},activated:function(){this.searchresult=[],this.getresult()}},T=x,$=(n("a4d8"),Object(d["a"])(T,b,k,!1,null,"4f84ffb8",null)),S=$.exports,C={data:function(){return{keywords:"",showcomponent:f,flag:!1}},components:{SearchBox:r["a"],Return:i["a"]},methods:{inputing:function(t){t&&(this.keywords=t),""==t||t.length<=0?this.showcomponent=f:this.showcomponent=y},searchresult:function(t){t.keywords&&(this.keywords=t.keywords),this.showcomponent=S}},created:function(){this.flag=!0}},j=C,O=Object(d["a"])(j,o,s,!1,null,null,null);e["default"]=O.exports},"2e88":function(t,e,n){"use strict";n("a8a1")},"3d6b":function(t,e,n){},"7a09":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"return"},[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.goback(e)}}},[t._v(" <")])])},s=[],r={methods:{goback:function(){this.$router.go(-1)}}},i=r,a=(n("dc19"),n("2877")),c=Object(a["a"])(i,o,s,!1,null,"50c54c4e",null);e["a"]=c.exports},"90e5":function(t,e,n){"use strict";n("bd8c")},"99af":function(t,e,n){"use strict";var o=n("23e7"),s=n("d039"),r=n("e8b5"),i=n("861d"),a=n("7b0b"),c=n("50c4"),u=n("8418"),l=n("65f0"),d=n("1dde"),h=n("b622"),f=n("2d00"),p=h("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",w=f>=51||!s((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),v=d("concat"),y=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:r(t)},b=!w||!v;o({target:"Array",proto:!0,forced:b},{concat:function(t){var e,n,o,s,r,i=a(this),d=l(i,0),h=0;for(e=-1,o=arguments.length;e<o;e++)if(r=-1===e?i:arguments[e],y(r)){if(s=c(r.length),h+s>m)throw TypeError(g);for(n=0;n<s;n++,h++)n in r&&u(d,h,r[n])}else{if(h>=m)throw TypeError(g);u(d,h++,r)}return d.length=h,d}})},a3ca:function(t,e,n){"use strict";n("3d6b")},a4d8:function(t,e,n){"use strict";n("fae8")},a8a1:function(t,e,n){},b0c0:function(t,e,n){var o=n("83ab"),s=n("9bf2").f,r=Function.prototype,i=r.toString,a=/^\s*function ([^ (]*)/,c="name";o&&!(c in r)&&s(r,c,{configurable:!0,get:function(){try{return i.call(this).match(a)[1]}catch(t){return""}}})},bd8c:function(t,e,n){},c12c:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"returntopbox"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.topshow,expression:"topshow"}],staticClass:"returntop",on:{click:t.goTop}},[t._v("^")])])},s=[],r={props:["topshow"],data:function(){return{topTimer:null}},methods:{goTop:function(){var t=this;this.topTimer=setInterval((function(){var e=document.documentElement.scrollTop||document.body.scrollTop,n=e/4;0!=document.documentElement.scrollTop?document.documentElement.scrollTop-=n:document.body.scrollTop-=n,0==e&&clearInterval(t.topTimer)}),30)}}},i=r,a=(n("a3ca"),n("2877")),c=Object(a["a"])(i,o,s,!1,null,"343572f4",null);e["a"]=c.exports},dc19:function(t,e,n){"use strict";n("e277")},e277:function(t,e,n){},fae8:function(t,e,n){}}]);
//# sourceMappingURL=chunk-7aa2e76e.5531e2d3.js.map